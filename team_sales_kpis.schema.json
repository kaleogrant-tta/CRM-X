{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Team Sales KPIs",
  "type": "object",
  "properties": {
    "module": { "type": "string", "const": "team_sales_kpis" },
    "version": { "type": "string" },
    "generated_at": { "type": "string" },
    "period": {
      "type": "object",
      "properties": {
        "period_start": { "type": "string" },
        "period_end": { "type": "string" },
        "timezone": { "type": "string" }
      },
      "required": ["period_start", "period_end", "timezone"]
    },
    "kpis": {
      "type": "object",
      "properties": {
        "highest_atv": {
          "type": "object",
          "properties": {
            "salesperson": { "type": "string" },
            "atv": { "type": "number" }
          },
          "required": ["salesperson", "atv"]
        }
      },
      "required": ["highest_atv"]
    },
    "tables": {
      "type": "object",
      "properties": {
        "revenue_per_rep": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "salesperson": { "type": "string" },
              "revenue": { "type": "number" },
              "orders": { "type": "integer" },
              "atv": { "type": "number" }
            },
            "required": ["salesperson", "revenue", "orders", "atv"]
          }
        }
      },
      "required": ["revenue_per_rep"]
    }
  },
  "required": ["module", "version", "generated_at", "period", "kpis", "tables"]
}
